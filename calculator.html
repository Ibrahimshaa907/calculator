<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator - Web & Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .calculator {
            background: #000000;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 350px;
            width: 100%;
        }

        .display {
            background: #000000;
            padding: 30px 20px;
            text-align: right;
            margin-bottom: 20px;
        }

        .display-text {
            font-size: 3.5rem;
            color: #FFFFFF;
            font-weight: 300;
            line-height: 1;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .button {
            height: 75px;
            border: none;
            border-radius: 50%;
            font-size: 1.8rem;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.2s ease;
            touch-action: manipulation;
        }

        .button:hover {
            transform: scale(1.05);
        }

        .button:active {
            transform: scale(0.95);
        }

        /* Number buttons */
        .number {
            background: #333333;
            color: #FFFFFF;
        }

        .number:hover {
            background: #404040;
        }

        /* Operation buttons */
        .operation {
            background: #FF9500;
            color: #FFFFFF;
        }

        .operation:hover {
            background: #FFB143;
        }

        .operation.active {
            background: #FFFFFF;
            color: #FF9500;
        }

        /* Function buttons */
        .function {
            background: #A6A6A6;
            color: #000000;
        }

        .function:hover {
            background: #BFBFBF;
        }

        /* Zero button (wide) */
        .zero {
            grid-column: span 2;
            border-radius: 37.5px;
            padding-left: 25px;
            text-align: left;
        }

        /* Responsive design */
        @media (max-width: 480px) {
            .calculator {
                max-width: 320px;
                padding: 20px;
            }

            .display-text {
                font-size: 3rem;
            }

            .button {
                height: 65px;
                font-size: 1.6rem;
            }
        }

        @media (max-width: 360px) {
            .display-text {
                font-size: 2.5rem;
            }

            .button {
                height: 55px;
                font-size: 1.4rem;
            }
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            color: #FFFFFF;
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #CCCCCC;
            font-size: 1rem;
            font-weight: 300;
        }
    </style>
</head>
<body>
    <div>
        <div class="header">
            <h1 class="title">Calculator</h1>
            <p class="subtitle">Professional Calculator - Web & Mobile</p>
        </div>
        
        <div class="calculator">
            <div class="display">
                <div class="display-text" id="display">0</div>
            </div>
            
            <div class="buttons">
                <!-- Row 1 -->
                <button class="button function" onclick="clearAll()">AC</button>
                <button class="button function" onclick="clearEntry()">C</button>
                <button class="button function" onclick="toggleSign()">±</button>
                <button class="button operation" onclick="setOperation('÷')">÷</button>
                
                <!-- Row 2 -->
                <button class="button number" onclick="inputNumber(7)">7</button>
                <button class="button number" onclick="inputNumber(8)">8</button>
                <button class="button number" onclick="inputNumber(9)">9</button>
                <button class="button operation" onclick="setOperation('×')">×</button>
                
                <!-- Row 3 -->
                <button class="button number" onclick="inputNumber(4)">4</button>
                <button class="button number" onclick="inputNumber(5)">5</button>
                <button class="button number" onclick="inputNumber(6)">6</button>
                <button class="button operation" onclick="setOperation('-')">-</button>
                
                <!-- Row 4 -->
                <button class="button number" onclick="inputNumber(1)">1</button>
                <button class="button number" onclick="inputNumber(2)">2</button>
                <button class="button number" onclick="inputNumber(3)">3</button>
                <button class="button operation" onclick="setOperation('+')">+</button>
                
                <!-- Row 5 -->
                <button class="button number zero" onclick="inputNumber(0)">0</button>
                <button class="button number" onclick="inputDecimal()">.</button>
                <button class="button operation" onclick="calculate()">=</button>
            </div>
        </div>
    </div>

    <script>
        let display = document.getElementById('display');
        let currentInput = '0';
        let previousInput = null;
        let operator = null;
        let waitingForNewInput = false;

        function updateDisplay() {
            // Format large numbers with commas
            let displayValue = currentInput;
            if (displayValue.length > 9) {
                displayValue = parseFloat(displayValue).toExponential(3);
            }
            display.textContent = displayValue;
        }

        function inputNumber(num) {
            if (waitingForNewInput) {
                currentInput = num.toString();
                waitingForNewInput = false;
            } else {
                currentInput = currentInput === '0' ? num.toString() : currentInput + num.toString();
            }
            updateDisplay();
            
            // Remove active state from operation buttons
            document.querySelectorAll('.operation').forEach(btn => {
                btn.classList.remove('active');
            });
        }

        function inputDecimal() {
            if (waitingForNewInput) {
                currentInput = '0.';
                waitingForNewInput = false;
            } else if (currentInput.indexOf('.') === -1) {
                currentInput += '.';
            }
            updateDisplay();
        }

        function setOperation(op) {
            if (operator && !waitingForNewInput) {
                calculate();
            }
            
            previousInput = parseFloat(currentInput);
            operator = op;
            waitingForNewInput = true;
            
            // Add visual feedback
            document.querySelectorAll('.operation').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find and highlight the pressed operation button
            const operationButtons = document.querySelectorAll('.operation');
            operationButtons.forEach(btn => {
                if (btn.textContent === op) {
                    btn.classList.add('active');
                }
            });
        }

        function calculate() {
            if (!operator || waitingForNewInput) return;
            
            let result;
            const prev = previousInput;
            const current = parseFloat(currentInput);
            
            switch (operator) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '×':
                    result = prev * current;
                    break;
                case '÷':
                    if (current === 0) {
                        alert('Cannot divide by zero!');
                        return;
                    }
                    result = prev / current;
                    break;
                default:
                    return;
            }
            
            currentInput = result.toString();
            operator = null;
            previousInput = null;
            waitingForNewInput = true;
            
            // Remove active state from operation buttons
            document.querySelectorAll('.operation').forEach(btn => {
                btn.classList.remove('active');
            });
            
            updateDisplay();
        }

        function clearAll() {
            currentInput = '0';
            previousInput = null;
            operator = null;
            waitingForNewInput = false;
            
            // Remove active state from operation buttons
            document.querySelectorAll('.operation').forEach(btn => {
                btn.classList.remove('active');
            });
            
            updateDisplay();
        }

        function clearEntry() {
            currentInput = '0';
            updateDisplay();
        }

        function toggleSign() {
            if (currentInput !== '0') {
                currentInput = currentInput.startsWith('-') 
                    ? currentInput.slice(1) 
                    : '-' + currentInput;
                updateDisplay();
            }
        }

        // Keyboard support
        document.addEventListener('keydown', function(event) {
            event.preventDefault();
            
            const key = event.key;
            
            if (key >= '0' && key <= '9') {
                inputNumber(parseInt(key));
            } else if (key === '.') {
                inputDecimal();
            } else if (key === '+') {
                setOperation('+');
            } else if (key === '-') {
                setOperation('-');
            } else if (key === '*') {
                setOperation('×');
            } else if (key === '/') {
                setOperation('÷');
            } else if (key === 'Enter' || key === '=') {
                calculate();
            } else if (key === 'Escape') {
                clearAll();
            } else if (key === 'Backspace') {
                clearEntry();
            }
        });

        // Initialize
        updateDisplay();
    </script>
</body>
</html>
